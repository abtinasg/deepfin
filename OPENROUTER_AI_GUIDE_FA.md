# ุณุณุชู ฺูุฏ-AI ุจุง ุงุณุชูุงุฏู ุงุฒ OpenRouter

## ๐ ููุง ฺฉู

ุณุณุชู ููุด ูุตููุน Deep Terminal ุงุฒ **OpenRouter** ุจุฑุง ุฏุณุชุฑุณ ุจู ฺูุฏู ูุฏู AI ูพุดุฑูุชู ุงุฒ ุทุฑู ฺฉ API ูุงุญุฏ ุงุณุชูุงุฏู ูโฺฉูุฏ:

- โ **ุฌุฏุฏุชุฑู ูุฏูโูุง**: Claude 4.5, GPT-5, Gemini 2.5 Pro, Grok 4 Fast
- โ **80% ุตุฑููโุฌู** ูุณุจุช ุจู API ูุง ูุณุชูู
- โ **ูุณุฑุงุจ ููุดููุฏ**: ุงูุชุฎุงุจ ุฎูุฏฺฉุงุฑ ุจูุชุฑู ูุฏู ุจุฑุง ูุฑ ุณูุงู
- โ **ุญุงูุช Ensemble**: ุชุฑฺฉุจ ุจูุด ุงุฒ ฺูุฏู ูุฏู
- โ **ูพุดุชุจุงู ุฎูุฏฺฉุงุฑ**: ุฌุงุจุฌุง ุงุชููุงุชฺฉ ุฏุฑ ุตูุฑุช ุนุฏู ุฏุณุชุฑุณ ุจู ูุฏู

---

## ๐๏ธ ูุนูุงุฑ

```
ุณูุงู ฺฉุงุฑุจุฑ
    โ
AI Router (ุชุดุฎุต ุจูุชุฑู ูุฏู)
    โ
OpenRouter API (ฺฉ endpoint ูุงุญุฏ)
    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Claude 4.5 | GPT-5 | Gemini 2.5 | Grok 4 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ
ูพุงุณุฎ + ุฑุฏุงุจ ุงุณุชูุงุฏู
```

---

## ๐ค ูุฏูโูุง ููุฌูุฏ

### ุขุฎุฑู ูุณู (2025)

| ูุฏู | ฺฉุงุฑุจุฑุฏ | ุณุฑุนุช | ูุฒูู/1M ุชูฺฉู |
|-----|---------|------|---------------|
| **Claude Sonnet 4.5** | ุชุญูู ุนููุ ุชุฒ ุณุฑูุงูโฺฏุฐุงุฑ | โกโกโกโก | $3 |
| **GPT-5** | ูุญุงุณุจุงุช ุฑุงุถุ ุชุญูู ฺฉู | โกโกโกโกโก | $5 |
| **Gemini 2.5 Pro** | ุชุญูู ูููุฏุงุฑุ ุชุดุฎุต ุงูฺฏู | โกโกโกโก | $2 |
| **Grok 4 Fast** | ุงุญุณุงุณุงุช ูุญุธูโุง Twitter/X | โกโกโกโกโก | $6 |
| Gemini 2.0 Flash | ุจูุง ุณุฑุน (ุงูุชุตุงุฏ) | โกโกโกโกโก | **ุฑุงฺฏุงู** |

### ููุทู ูุณุฑุงุจ ููุดููุฏ

AI Router ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุจูุชุฑู ูุฏู ุฑุง ุจุฑ ุงุณุงุณ ฺฉููุงุช ฺฉูุฏ ุงูุชุฎุงุจ ูโฺฉูุฏ:

```typescript
// ุดุจฺฉูโูุง ุงุฌุชูุงุน/ุชูุชุฑ โ Grok 4 Fast
"ุชูุชุฑ ุฏุฑุจุงุฑู TSLA ฺู ูโฺฏูุฏุ"

// ูููุฏุงุฑูุง/ุจุตุฑ โ Gemini 2.5 Pro
"ุงูฺฏู ูููุฏุงุฑ AAPL ุฑุง ุชุญูู ฺฉู"

// ุฑุงุถ/ูุญุงุณุจุงุช โ GPT-5
"DCF ุงุฑุฒุดโฺฏุฐุงุฑ MSFT ุฑุง ูุญุงุณุจู ฺฉู"

// ุชุญูู ุนููู โ Claude 4.5 (ูพุดโูุฑุถ)
"ุชุฒ ุตุนูุฏ ู ูุฒูู ุจุฑุง NVDA ุจุฏู"
```

---

## ๐ฆ ูุตุจ

```bash
# ูุตุจ SDK OpenAI (OpenRouter ุณุงุฒฺฏุงุฑ ุงุณุช)
npm install openai

# ุจูโุฑูุฒุฑุณุงู Prisma schema
npx prisma generate
npx prisma db push
```

---

## ๐ ุชูุธูุงุช ูุญุท

ุจู `.env.local` ุงุถุงูู ฺฉูุฏ:

```env
# ฺฉูุฏ API OpenRouter
OPENROUTER_API_KEY=sk-or-v1-your-key-here

# ฺฉูุฏ ุฎูุฏ ุฑุง ุงุฒ ุงูุฌุง ุฏุฑุงูุช ฺฉูุฏ: https://openrouter.ai/keys

# ุขุฏุฑุณ ุจุฑูุงูู ุดูุง (ุจุฑุง ุขูุงูุชฺฉุณ)
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## ๐ฏ ุงุณุชูุงุฏู

### 1. API ฺุช ุณุงุฏู

```typescript
// POST /api/ai/chat
{
  "query": "ุงุญุณุงุณุงุช ุฏุฑุจุงุฑู TSLA ฺุณุชุ",
  "ticker": "TSLA",
  "mode": "auto" // auto | grok | gemini | gpt5 | claude | ensemble
}
```

**ูพุงุณุฎ:**
```json
{
  "model": "x-ai/grok-4-fast",
  "response": "ุจุฑ ุงุณุงุณ ุชุญูู Twitter/X...",
  "cost": 0.000123,
  "usage": {
    "total_tokens": 450,
    "prompt_tokens": 150,
    "completion_tokens": 300
  }
}
```

### 2. Endpoint ุงุญุณุงุณุงุช ุชูุชุฑ

```typescript
// GET /api/ai/chat?ticker=TSLA

// ุชุญูู ูุญุธูโุง ุชูุชุฑ ุชูุณุท Grok ุจุฑูโฺฏุฑุฏุงูุฏ
```

### 3. ุญุงูุช Ensemble

ุจูุด ุงุฒ **3 ูุฏู** ุจู ุตูุฑุช ููุฒูุงู ุชุฑฺฉุจ ูโุดูุฏ:

```typescript
{
  "query": "META ุจุฎุฑูุ",
  "mode": "ensemble"
}
```

**ูพุงุณุฎ ุดุงูู:**
- **Grok**: ุงุญุณุงุณุงุช ุงุฌุชูุงุน
- **Claude**: ุชุญูู ุจูุงุฏ
- **GPT-5**: ูุนุงุฑูุง ฺฉู
- **ุชุฑฺฉุจ**: ุชูุตู ุชุฑฺฉุจ

---

## ๐ฐ ุชุญูู ูุฒูู

### ูุฒูู ูุงูุงูู (10,000 ุฏุฑุฎูุงุณุช/ุฑูุฒ)

#### ุฑุงูโุงูุฏุงุฒ ูพุฑููู (ุชูุงู ูุฏูโูุง ุฌุฏุฏ)
- Claude 4.5 (40%): $12/ุฑูุฒ
- GPT-5 (10%): $5/ุฑูุฒ
- Gemini 2.5 Pro (25%): $5/ุฑูุฒ
- Grok 4 Fast (25%): $15/ุฑูุฒ

**ูุฌููุน: $37/ุฑูุฒ = $1,110/ูุงู**

#### ุฑุงูโุงูุฏุงุฒ ูุชุนุงุฏู (ุชูุตู ูโุดูุฏ) โญ
- Claude 4.5 (40%): $12/ุฑูุฒ
- GPT-5 (5%): $2.50/ุฑูุฒ
- GPT-4o ูพุดุชุจุงู (5%): $1.25/ุฑูุฒ
- Gemini 2.0 Flash (30%): **$0/ุฑูุฒ** (ุฑุงฺฏุงู!)
- Grok 4 Fast (20%): $12/ุฑูุฒ

**ูุฌููุน: $27.75/ุฑูุฒ = $832/ูุงู**
**ุตุฑููโุฌู: 79% ูุณุจุช ุจู API ูุง ูุณุชูู ($4,050/ูุงู)**

#### ุจูููโุณุงุฒ ุจูุฏุฌู
- Claude 4.5 (30%): $9/ุฑูุฒ
- GPT-4o (10%): $2.50/ุฑูุฒ
- Gemini 2.0 Flash (40%): **$0/ุฑูุฒ**
- Grok 4 Fast (20%): $12/ุฑูุฒ

**ูุฌููุน: $23.50/ุฑูุฒ = $705/ูุงู**
**ุตุฑููโุฌู: 83% ูุณุจุช ุจู API ูุง ูุณุชูู**

---

## ๐ ูฺฺฏโูุง

### 1. ูุณุฑุงุจ ููุดููุฏ
ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุจูุชุฑู ูุฏู ุฑุง ุจุฑ ุงุณุงุณ ููุน ุณูุงู ุงูุชุฎุงุจ ูโฺฉูุฏ:
- ุงุญุณุงุณุงุช ุงุฌุชูุงุน โ **Grok 4 Fast**
- ุชุญูู ูููุฏุงุฑ โ **Gemini 2.5 Pro**
- ูุญุงุณุจุงุช โ **GPT-5**
- ุชุญูู ุนูู โ **Claude 4.5**

### 2. ฺฉุดโุณุงุฒ
ฺฉุด Redis ุจุง TTL 5 ุฏูููโุง ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุฑุงุฎูุงูโูุง ุงุถุงู API.

### 3. ุฑุฏุงุจ ุงุณุชูุงุฏู
ุชูุงู ุฏุฑุฎูุงุณุชโูุง ุฏุฑ ุฏุชุงุจุณ ุซุจุช ูโุดููุฏ ุจุง:
- ูุฏู ุงุณุชูุงุฏู ุดุฏู
- ุชูฺฉูโูุง ูุตุฑู ุดุฏู
- ูุฒูู (ุจู ุฏูุงุฑ)
- ุฒูุงู

### 4. ูพุดุชุจุงู ุฎูุฏฺฉุงุฑ
ุงฺฏุฑ ูุฏู ฺฉุงุฑ ูฺฉูุฏุ OpenRouter ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุฌุงฺฏุฒูโูุง ูุดุงุจู ุฑุง ุงูุชุญุงู ูโฺฉูุฏ.

### 5. ูุญุฏูุฏุช ูุฑุฎ
OpenRouter ูุญุฏูุฏุช ูุฑุฎ ุฑุง ุฏุฑ ุชูุงู ูุฏูโูุง ูุฏุฑุช ูโฺฉูุฏ.

---

## ๐งช ุชุณุช

```bash
# ุชุณุช ฺุช ุณุงุฏู
curl -X POST http://localhost:3000/api/ai/chat \
  -H "Content-Type: application/json" \
  -d '{
    "query": "ุชูุชุฑ ุฏุฑุจุงุฑู TSLA ฺู ูโฺฏูุฏุ",
    "ticker": "TSLA",
    "mode": "grok"
  }'

# ุชุณุช ุงุญุณุงุณุงุช ุชูุชุฑ
curl http://localhost:3000/api/ai/chat?ticker=TSLA

# ุชุณุช ุญุงูุช ensemble
curl -X POST http://localhost:3000/api/ai/chat \
  -H "Content-Type: application/json" \
  -d '{
    "query": "NVDA ุจุฎุฑูุ",
    "ticker": "NVDA",
    "mode": "ensemble"
  }'
```

---

## ๐ ุฏุงุดุจูุฑุฏ OpenRouter

ูุดุงูุฏู ุงุณุชูุงุฏู ุฏุฑ: https://openrouter.ai/dashboard

ูฺฺฏโูุง:
- ุฑุฏุงุจ ุงุณุชูุงุฏู ูุญุธูโุง
- ุขูุงูุชฺฉุณ ูุฒูู ุจู ุชูฺฉฺฉ ูุฏู
- ููุงุณู ุนููฺฉุฑุฏ
- ูุธุงุฑุช ุจุฑ ูุญุฏูุฏุช ูุฑุฎ
- ูุงฺฏ ุฎุทุงูุง

---

## ๐จ ฺฉุงููพูููุช UI

ุฏุณุชุฑุณ ุจู ฺุช AI ุฏุฑ: `/dashboard/ai`

ูฺฺฏโูุง:
- ูุฑูุฏ ุณูุงู ุจุง ุฒููู ticker
- ุงูุชุฎุงุจโฺฏุฑ ูุฏู (auto, grok, gemini, gpt5, claude, ensemble)
- ููุงุด ูุฒูู ูุญุธูโุง
- ุขูุงุฑ ุงุณุชูุงุฏู ุงุฒ ุชูฺฉู
- ูพุงุณุฎโูุง ูุฑูุชโุดุฏู ุจุง Syntax Highlighting
- ุณูุงูุงุช ููููู

---

## ๐ง ุงุณุชูุงุฏู ูพุดุฑูุชู

### 1. ุชุญูู ูููุฏุงุฑ ุจุง Gemini 2.5 Pro

```typescript
import { openRouterService } from '@/lib/ai/openrouter';

const result = await openRouterService.analyzeChart(
  'AAPL',
  chartImageBase64 // PNG ฺฉุฏฺฏุฐุงุฑ ุดุฏู Base64
);
```

### 2. ุชุญูู ุจูุงุฏ ุจุง Claude 4.5

```typescript
const result = await openRouterService.analyzeFundamentals(
  'MSFT',
  {
    revenue: 198000000000,
    netIncome: 72000000000,
    pe: 32,
    // ... ุฏุงุฏูโูุง ูุงู ุจุดุชุฑ
  }
);
```

### 3. ูุญุงุณุจู DCF ุจุง GPT-5

```typescript
const result = await openRouterService.calculate(
  'AAPL',
  'ุงุฑุฒุดโฺฏุฐุงุฑ DCF',
  {
    freeCashFlow: 100000000000,
    growthRate: 0.15,
    wacc: 0.10,
    terminalGrowth: 0.03,
  }
);
```

---

## ๐จ ูุฏุฑุช ุฎุทุง

ุชูุงู ุฎุทุงูุง ฺฏุฑูุชู ุดุฏู ู ุจุง ฺฉุฏูุง ูุถุนุช HTTP ููุงุณุจ ุจุฑฺฏุฑุฏุงูุฏู ูโุดููุฏ:

```typescript
try {
  const result = await openRouterService.chat(...);
} catch (error) {
  // OpenRouter ูุฏุฑุช ูโฺฉูุฏ:
  // - ูุญุฏูุฏุช ูุฑุฎ (429)
  // - ฺฉูุฏ API ูุงูุนุชุจุฑ (401)
  // - ูุฏู ุฏุฑ ุฏุณุชุฑุณ ูุณุช (503)
  // - ุฎุทุงูุง ุดุจฺฉู
}
```

---

## ๐ Schema ุฏุชุงุจุณ

```prisma
model AiUsage {
  id          String   @id @default(uuid())
  userId      String
  model       String   // "anthropic/claude-sonnet-4.5"
  tokensUsed  Int
  cost        Float    // USD
  query       String
  timestamp   DateTime @default(now())

  @@index([userId])
  @@index([timestamp])
}
```

ูพุฑุณโูุฌู ุขูุงุฑ ุงุณุชูุงุฏู:

```typescript
// ูุฒูู ฺฉู ุงู ูุงู
const totalCost = await prisma.aiUsage.aggregate({
  where: {
    userId: 'user_123',
    timestamp: { gte: startOfMonth },
  },
  _sum: { cost: true },
});

// ูพุฑุงุณุชูุงุฏูโุชุฑู ูุฏูโูุง
const modelStats = await prisma.aiUsage.groupBy({
  by: ['model'],
  _count: true,
  _sum: { cost: true, tokensUsed: true },
});
```

---

## ๐ฏ ุจูุชุฑู ุดููโูุง

1. **ุงุฒ ุญุงูุช Auto ุงุณุชูุงุฏู ฺฉูุฏ** ุจุฑุง ุณูุงูุงุช ุนููู (ูุณุฑุงุจ ููุดููุฏ)
2. **ฺฉุด ุจู ุดุฏุช** (5-15 ุฏููู TTL ุจุฑ ุงุณุงุณ ุชุงุฒฺฏ ุฏุงุฏู)
3. **ุฒููู ticker ุฑุง ุจุฏูุฏ** ุฏุฑ ุตูุฑุช ูุฌูุฏ (ุฏูุช ุฑุง ุจูุจูุฏ ูโุฏูุฏ)
4. **ุงุฒ ุญุงูุช Ensemble ุงุณุชูุงุฏู ฺฉูุฏ** ุจุฑุง ุชุตููุงุช ุณุฑูุงูโฺฏุฐุงุฑ ุญุงุช
5. **ูุฒููโูุง ุฑุง ูุธุงุฑุช ฺฉูุฏ** ุงุฒ ุทุฑู ุฏุงุดุจูุฑุฏ OpenRouter
6. **ูุญุฏูุฏุช ูุฒูู ุชูุธู ฺฉูุฏ** ุฏุฑ ุชูุธูุงุช OpenRouter

---

## ๐ ุงููุช

- ฺฉูุฏูุง API ุฏุฑ ูุชุบุฑูุง ูุญุท ุฐุฎุฑู ูโุดููุฏ (ูุฑฺฏุฒ ุฏุฑ ฺฉุฏ ูุณุช)
- ุชูุงู endpoint ูุง ูุงุฒ ุจู ุงุญุฑุงุฒ ููุช Clerk ุฏุงุฑูุฏ
- ุณูุงูุงุช ฺฉุงุฑุจุฑ ูุจู ุงุฒ ุฐุฎุฑู ุจู 500 ฺฉุงุฑุงฺฉุชุฑ ูุญุฏูุฏ ูโุดููุฏ
- ูุญุฏูุฏุช ูุฑุฎ ุฏุฑ route ูุง API (ุฏุฑ ุตูุฑุช ูุงุฒ)
- ฺฉุด Redis ุงุฒ ุณูุก ุงุณุชูุงุฏู ุฌููฺฏุฑ ูโฺฉูุฏ

---

## ๐ ููุงุจุน

- ูุณุชูุฏุงุช OpenRouter: https://openrouter.ai/docs
- ุฏุงุดุจูุฑุฏ OpenRouter: https://openrouter.ai/dashboard
- ููุงุณู ูุฏู: https://openrouter.ai/models
- ููุชโฺฏุฐุงุฑ: https://openrouter.ai/docs/pricing

---

## ๐ ฺฺฉโูุณุช ุงุณุชูุฑุงุฑ

- [ ] ุงุถุงูู ฺฉุฑุฏู `OPENROUTER_API_KEY` ุจู ูุญุท ุชููุฏ
- [ ] ุงุฌุฑุง `npx prisma db push` ุจุฑุง ุงุฌุงุฏ ุฌุฏูู `ai_usage`
- [ ] ุชุณุช ุชูุงู 6 ุญุงูุช (auto, grok, gemini, gpt5, claude, ensemble)
- [ ] ูพฺฉุฑุจูุฏ ฺฉุด Redis
- [ ] ุชูุธู ูุญุฏูุฏุช ูุฒูู ุฏุฑ ุฏุงุดุจูุฑุฏ OpenRouter
- [ ] ูุธุงุฑุช ุฑูุฒุงูู ุจุฑ ุงุณุชูุงุฏู ู ูุฒููโูุง
- [ ] ูุนุงูโุณุงุฒ ุงุญุฑุงุฒ ููุช Clerk ุฏุฑ route ูุง `/api/ai/*`

---

## ๐ก ูพุดุฑูุชโูุง ุขูุฏู

- [ ] Stream ฺฉุฑุฏู ูพุงุณุฎโูุง ุจุฑุง UX ุจูุชุฑ
- [ ] ุงุถุงูู ฺฉุฑุฏู ูุฑูุฏ/ุฎุฑูุฌ ุตูุช
- [ ] ฺฉูพุงุฑฺูโุณุงุฒ ุจุง ุงุฌุฑุง ูุนุงููุงุช
- [ ] ูพุดุชุจุงู ฺูุฏ ุฒุจุงูู (ูุงุฑุณ)
- [ ] ูุฏูโูุง Fine-tuned ุณูุงุฑุด
- [ ] A/B testing ูุฏูโูุง ูุฎุชูู
- [ ] ุฑุฏุงุจ ุฑููุฏ ุงุญุณุงุณุงุช ุฏุฑ ุทูู ุฒูุงู
- [ ] ุจูููโุณุงุฒ ูพูุฑุชูููู ุจุง AI
- [ ] ุฎูุงุตูโูุง ุฑูุฒุงูู ุฎูุฏฺฉุงุฑ ุจุงุฒุงุฑ

---

**ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุจุง ุงุณุชูุงุฏู ุงุฒ OpenRouter - ุฏุฑูุงุฒู ูุงุญุฏ AI**
